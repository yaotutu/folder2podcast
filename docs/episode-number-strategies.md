# 剧集序号提取说明

folder2podcast 支持多种从文件名中提取剧集序号的策略，包括两种默认策略和三种可配置策略。

## 默认策略

系统默认会按以下优先级提取剧集序号：

1. **前缀匹配**（默认首选）
   - 查找文件名开头的数字
   - 示例：
     * `001_科技早知道.mp3` -> 序号: 1
     * `123-人工智能简史.mp3` -> 序号: 123

2. **后缀匹配**（默认备选）
   - 查找文件扩展名前的数字
   - 示例：
     * `科技早知道_001.mp3` -> 序号: 1
     * `人工智能简史-123.mp3` -> 序号: 123

## 可配置策略

在 podcast.json 中可以配置以下三种序号提取策略：

### 1. 首个数字策略

从左到右扫描，使用遇到的第一个数字作为序号。

```json
{
  "episodeNumberStrategy": "first"
}
```

示例：
- `zk01科技新闻08期.mp3` -> 序号: 1
- `周刊123之人工智能456.mp3` -> 序号: 123

### 2. 最后数字策略

从右到左扫描，使用最后一个数字作为序号。

```json
{
  "episodeNumberStrategy": "last"
}
```

示例：
- `zk01科技新闻08期.mp3` -> 序号: 8
- `周刊123之人工智能456.mp3` -> 序号: 456

### 3. 自定义正则表达式策略

使用自定义的正则表达式来精确匹配序号。

```json
{
  "episodeNumberStrategy": {
    "pattern": "zk(\\d+)"
  }
}
```

示例：
- `zk001科技新闻.mp3` -> 序号: 1
- `zk123人工智能.mp3` -> 序号: 123

使用 `第(\d+)期` 的示例：
```json
{
  "episodeNumberStrategy": {
    "pattern": "第(\\d+)期"
  }
}
```
- `科技新闻第01期.mp3` -> 序号: 1
- `人工智能第123期.mp3` -> 序号: 123

## 注意事项

1. 不配置 `episodeNumberStrategy` 时，系统使用前缀匹配策略
2. 使用正则表达式时：
   - 使用 `\\` 来转义反斜杠，例如 `\\d` 而不是 `\d`
   - 必须使用捕获组 `()` 来指定要提取的数字部分
   - 如果正则表达式匹配失败，系统会回退到前缀匹配策略
3. 建议在同一个播客目录中保持统一的文件命名规则

## 调试说明

当序号提取出现问题时，系统会输出以下日志：
- 使用自定义正则表达式失败时的警告信息
- 回退到默认策略时的提示
- 配置验证错误信息

## 配置示例

完整的 podcast.json 配置示例：

```json
{
  "title": "我的播客",
  "description": "播客描述",
  "episodeNumberStrategy": "first"  // 或 "last"，或使用自定义正则表达式对象
}
